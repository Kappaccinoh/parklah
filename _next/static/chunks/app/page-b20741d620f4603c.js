(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5276:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>e7});var i=t(5155),s=t(2115),n=t(7924),r=t(1482),l=t(646),o=t(1243),d=t(235),c=t(3578),m=t(5742),u=t(3109),g=t(9153),p=t(4186),h=t(4783),x=t(4416),f=t(1432),y=t(1497),v=t(7939),b=t(3861),j=t(9708),M=t(2085),N=t(2596),k=t(9688);function w(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,k.QP)((0,N.$)(a))}let P=(0,M.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),A=s.forwardRef((e,a)=>{let{className:t,variant:s,size:n,asChild:r=!1,...l}=e,o=r?j.DX:"button";return(0,i.jsx)(o,{className:w(P({variant:s,size:n,className:t})),ref:a,...l})});A.displayName="Button";let S=s.forwardRef((e,a)=>{let{className:t,type:s,...n}=e;return(0,i.jsx)("input",{type:s,className:w("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n})});S.displayName="Input";let C=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:a,className:w("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});C.displayName="Card",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:a,className:w("flex flex-col space-y-1.5 p-6",t),...s})}).displayName="CardHeader",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:a,className:w("text-2xl font-semibold leading-none tracking-tight",t),...s})}).displayName="CardTitle",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:a,className:w("text-sm text-muted-foreground",t),...s})}).displayName="CardDescription";let L=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:a,className:w("p-6 pt-0",t),...s})});L.displayName="CardContent",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)("div",{ref:a,className:w("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter";let T=(0,M.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function K(e){let{className:a,variant:t,...s}=e;return(0,i.jsx)("div",{className:w(T({variant:t}),a),...s})}var R=t(5452);let E=R.bL,H=R.l9;R.bm;let _=R.ZL,D=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(R.hJ,{className:w("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});D.displayName=R.hJ.displayName;let F=(0,M.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),z=s.forwardRef((e,a)=>{let{side:t="right",className:s,children:n,...r}=e;return(0,i.jsxs)(_,{children:[(0,i.jsx)(D,{}),(0,i.jsxs)(R.UC,{ref:a,className:w(F({side:t}),s),...r,children:[n,(0,i.jsxs)(R.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,i.jsx)(x.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});z.displayName=R.UC.displayName;let J=e=>{let{className:a,...t}=e;return(0,i.jsx)("div",{className:w("flex flex-col space-y-2 text-center sm:text-left",a),...t})};J.displayName="SheetHeader";let I=e=>{let{className:a,...t}=e;return(0,i.jsx)("div",{className:w("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};I.displayName="SheetFooter";let U=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(R.hE,{ref:a,className:w("text-lg font-semibold text-foreground",t),...s})});U.displayName=R.hE.displayName;let B=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(R.VY,{ref:a,className:w("text-sm text-muted-foreground",t),...s})});B.displayName=R.VY.displayName;var O=t(8715),q=t(6474),V=t(7863),W=t(5196);let G=O.bL;O.YJ;let Y=O.WT,Q=s.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,i.jsxs)(O.l9,{ref:a,className:w("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,(0,i.jsx)(O.In,{asChild:!0,children:(0,i.jsx)(q.A,{className:"h-4 w-4 opacity-50"})})]})});Q.displayName=O.l9.displayName;let Z=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(O.PP,{ref:a,className:w("flex cursor-default items-center justify-center py-1",t),...s,children:(0,i.jsx)(V.A,{className:"h-4 w-4"})})});Z.displayName=O.PP.displayName;let X=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(O.wn,{ref:a,className:w("flex cursor-default items-center justify-center py-1",t),...s,children:(0,i.jsx)(q.A,{className:"h-4 w-4"})})});X.displayName=O.wn.displayName;let $=s.forwardRef((e,a)=>{let{className:t,children:s,position:n="popper",...r}=e;return(0,i.jsx)(O.ZL,{children:(0,i.jsxs)(O.UC,{ref:a,className:w("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,i.jsx)(Z,{}),(0,i.jsx)(O.LM,{className:w("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,i.jsx)(X,{})]})})});$.displayName=O.UC.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(O.JU,{ref:a,className:w("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=O.JU.displayName;let ee=s.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,i.jsxs)(O.q7,{ref:a,className:w("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(O.VF,{children:(0,i.jsx)(W.A,{className:"h-4 w-4"})})}),(0,i.jsx)(O.p4,{children:s})]})});ee.displayName=O.q7.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(O.wv,{ref:a,className:w("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=O.wv.displayName;var ea=t(64);let et=ea.bL,ei=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(ea.B8,{ref:a,className:w("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s})});ei.displayName=ea.B8.displayName;let es=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(ea.l9,{ref:a,className:w("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s})});es.displayName=ea.l9.displayName;let en=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(ea.UC,{ref:a,className:w("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});en.displayName=ea.UC.displayName;var er=t(2200);let el={width:"100%",height:"100%"},eo=["places","visualization"],ed={lat:3.139,lng:101.6869},ec={disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,scaleControl:!1,rotateControl:!1},em=e=>{var a,t,n,r,l;let{apiKey:o,parkingSpots:d,selectedSpotId:c,onSpotSelect:m,userLocation:u,showHeatmap:g=!1,onMapLoad:p}=e,h=(0,s.useMemo)(()=>(null==u?void 0:u.latitude)&&(null==u?void 0:u.longitude)?{lat:u.latitude,lng:u.longitude}:ed,[null==u?void 0:u.latitude,null==u?void 0:u.longitude]),{isLoaded:x}=(0,er.KD)({id:"google-map-script",googleMapsApiKey:o,libraries:eo});(0,s.useEffect)(()=>{if(x&&g){var e,a;if(!(null===(a=window.google)||void 0===a?void 0:null===(e=a.maps)||void 0===e?void 0:e.visualization)){console.log("Loading visualization library...");let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat(o,"&libraries=visualization"),e.async=!0,document.head.appendChild(e)}}},[x,g,o]);let[f,y]=(0,s.useState)(null),[v,b]=(0,s.useState)(null),j=(0,s.useRef)(null);(0,s.useEffect)(()=>()=>{j.current&&(j.current.setMap(null),j.current=null)},[]);let M=(0,s.useMemo)(()=>{if(!x||!window.google||!window.google.maps)return[];let e=[];return d.forEach(a=>{let t=new Date().getHours(),i=a.trafficFrequency[t]/100;e.push({location:new window.google.maps.LatLng(a.lat,a.lng),weight:2*i}),a.capacity,[{direction:0,count:8},{direction:90,count:6},{direction:180,count:8},{direction:270,count:6},{direction:45,count:4},{direction:135,count:4},{direction:225,count:4},{direction:315,count:4}].forEach(t=>{let s=Math.ceil(t.count*(a.capacity/100));for(let n=1;n<=s;n++){let r=n/s*.003,l=t.direction*Math.PI/180,o=Math.sin(l)*r+(Math.random()-.5)*1e-4,d=Math.cos(l)*r+(Math.random()-.5)*1e-4,c=1-n/s;if(e.push({location:new window.google.maps.LatLng(a.lat+o,a.lng+d),weight:i*c*.8}),n%2==0&&n<s-1){let t=l+Math.PI/2,s=5e-4*Math.random();e.push({location:new window.google.maps.LatLng(a.lat+o+Math.sin(t)*s,a.lng+d+Math.cos(t)*s),weight:i*c*.4})}}})}),e},[d,x]);(0,s.useRef)(null);let N=(0,s.useCallback)(function(e){if(y(e),window.google&&window.google.maps&&window.google.maps.visualization){for(let a of e.get("heatmapLayers")||[])a&&"function"==typeof a.setMap&&a.setMap(null);e.set("heatmapLayers",[])}p&&p(e)},[p]),k=e=>{b(e);let a=d.find(a=>a.id===e);a&&m&&m(a)},w=e=>x&&window.google?{path:window.google.maps.SymbolPath.CIRCLE,fillColor:e.isLegal?"#4ade80":"#ef4444",fillOpacity:.9,strokeWeight:2,strokeColor:"#ffffff",scale:8,label:{text:"".concat(e.walkTime,"m"),color:"#ffffff",fontSize:"10px",fontWeight:"bold"}}:{};return x?(0,i.jsxs)(er.u6,{mapContainerStyle:el,center:h,zoom:(null==u?void 0:u.latitude)?15:14,options:ec,onLoad:N,children:[(null==u?void 0:u.latitude)&&(null==u?void 0:u.longitude)&&x&&window.google&&(0,i.jsx)(er.pH,{position:{lat:u.latitude,lng:u.longitude},icon:{path:window.google.maps.SymbolPath.CIRCLE,fillColor:"#4285F4",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2,scale:8},zIndex:1e3,title:"Your Location"}),(()=>{var e,a;return x&&f&&g&&(null===(a=window.google)||void 0===a?void 0:null===(e=a.maps)||void 0===e?void 0:e.visualization)?(console.log("Creating heatmap with",M.length,"points"),j.current&&(j.current.setMap(null),j.current=null),j.current=new window.google.maps.visualization.HeatmapLayer({data:M,map:f,radius:30,opacity:.7,gradient:["rgba(0, 255, 255, 0)","rgba(0, 255, 255, 1)","rgba(0, 191, 255, 1)","rgba(0, 127, 255, 1)","rgba(0, 63, 255, 1)","rgba(0, 0, 255, 1)","rgba(0, 0, 223, 1)","rgba(0, 0, 191, 1)","rgba(0, 0, 159, 1)","rgba(0, 0, 127, 1)","rgba(63, 0, 91, 1)","rgba(127, 0, 63, 1)","rgba(191, 0, 31, 1)","rgba(255, 0, 0, 1)"]})):!g&&j.current&&(console.log("Removing heatmap"),j.current.setMap(null),j.current=null),null})(),d.map(e=>(0,i.jsx)(s.Fragment,{children:(0,i.jsx)(er.pH,{position:{lat:e.lat,lng:e.lng},onClick:()=>k(e.id),icon:w(e),animation:e.id===c?google.maps.Animation.BOUNCE:void 0,zIndex:100})},e.id)),null!==v&&(0,i.jsx)(er.Fu,{position:{lat:(null===(a=d.find(e=>e.id===v))||void 0===a?void 0:a.lat)||0,lng:(null===(t=d.find(e=>e.id===v))||void 0===t?void 0:t.lng)||0},onCloseClick:()=>b(null),children:(0,i.jsxs)("div",{className:"p-2 max-w-xs",children:[(0,i.jsx)("h3",{className:"font-medium text-sm",children:null===(n=d.find(e=>e.id===v))||void 0===n?void 0:n.name}),(0,i.jsx)("p",{className:"text-xs text-gray-600",children:null===(r=d.find(e=>e.id===v))||void 0===r?void 0:r.address}),(0,i.jsxs)("p",{className:"text-xs mt-1",children:["RM",null===(l=d.find(e=>e.id===v))||void 0===l?void 0:l.pricePerHour,"/hr"]})]})})]}):(0,i.jsx)("div",{className:"flex items-center justify-center h-full w-full bg-gray-100",children:(0,i.jsxs)("div",{className:"p-4 bg-white rounded shadow",children:[(0,i.jsx)("h2",{className:"text-lg font-bold",children:"Loading Map..."}),(0,i.jsx)("p",{children:"Please wait while we load the map."})]})})};var eu=t(1164),eg=t(4200),ep=t(9934),eh=t(1284);function ex(e){return e<1?"".concat(Math.round(1e3*e),"m"):"".concat(e.toFixed(1),"km")}function ef(e){return Math.PI/180*e}var ey=t(9106);let ev={"turn-jalan-bukit-bintang":{url:(0,ey.h)("/Jalan_Alor_in_Kuala_Lumpur_during_Corona_virus_lockdown.jpg"),caption:"Turn right onto Jalan Bukit Bintang",contributor:"Local user: Ahmad",timestamp:"2 weeks ago"},"pavilion-entrance":{url:(0,ey.h)("/Jalan_Alor_in_Kuala_Lumpur_during_Corona_virus_lockdown.jpg"),caption:"Pavilion mall entrance - look for the parking sign",contributor:"Local user: Sarah",timestamp:"1 month ago"},"klcc-approach":{url:(0,ey.h)("/Jalan_Alor_in_Kuala_Lumpur_during_Corona_virus_lockdown.jpg"),caption:"KLCC approach view - parking entrance ahead",contributor:"Local user: Michael",timestamp:"3 weeks ago"},"times-square-entrance":{url:(0,ey.h)("/Jalan_Alor_in_Kuala_Lumpur_during_Corona_virus_lockdown.jpg"),caption:"Berjaya Times Square parking entrance",contributor:"Local user: Aisha",timestamp:"2 months ago"},"uptown-damansara-junction":{url:(0,ey.h)("/Jalan_Alor_in_Kuala_Lumpur_during_Corona_virus_lockdown.jpg"),caption:"Junction to Uptown Damansara",contributor:"Local user: Raj",timestamp:"1 week ago"},"kampung-pandan-approach":{url:(0,ey.h)("/place1/6183812248728881309.jpg"),caption:"Approaching Kampung Pandan parking area",contributor:"ParkLah Team",timestamp:"4 days ago"},"kampung-pandan-entrance":{url:(0,ey.h)("/place1/6183812248728881310.jpg"),caption:"Main entrance to Kampung Pandan outdoor parking",contributor:"ParkLah Team",timestamp:"4 days ago"},"kampung-pandan-lots":{url:(0,ey.h)("/place1/6183812248728881312.jpg"),caption:"Available parking spots at Kampung Pandan outdoor parking",contributor:"ParkLah Team",timestamp:"4 days ago"},"roadside-approach":{url:(0,ey.h)("/place2/6183812248728881313.jpg"),caption:"Approaching Kampung Pandan roadside parking area",contributor:"ParkLah Team",timestamp:"3 days ago"},"roadside-parking-zone":{url:(0,ey.h)("/place2/6183812248728881314.jpg"),caption:"Legal roadside parking zone in Kampung Pandan",contributor:"ParkLah Team",timestamp:"3 days ago"},"roadside-payment":{url:(0,ey.h)("/place2/6183812248728881315.jpg"),caption:"Payment machine for Kampung Pandan roadside parking",contributor:"ParkLah Team",timestamp:"3 days ago"},"entier-entrance":{url:(0,ey.h)("/place3/6183812248728881468.jpg"),caption:"Main entrance to Alila Bangsar parking for Entier French Dining",contributor:"ParkLah Team",timestamp:"2 days ago"}},eb={"Pavilion KL Parking":["turn-jalan-bukit-bintang","pavilion-entrance"],"KLCC Suria Mall Parking":["klcc-approach"],"Berjaya Times Square Parking":["times-square-entrance"],"Starling Mall Parking":["uptown-damansara-junction"],"Uptown Street Parking":["uptown-damansara-junction"],"Outdoor Parking - Kampung Pandan":["kampung-pandan-approach","kampung-pandan-entrance","kampung-pandan-lots"],"Kampung Pandan Roadside Parking":["roadside-approach","roadside-parking-zone","roadside-payment"],"Entier French Dining Parking":["entier-entrance"]},ej=(e,a,t)=>{switch(e){case 21:return function(e,a){let t=eb[e]||[];switch(a){case"driving":return[{instruction:"Head toward Jalan Kampung Pandan",distance:.3,time:2,isKey:!1},{instruction:"Turn right onto Jalan Kampung Pandan",distance:.8,time:3,isKey:!1},{instruction:"Continue straight for 400m",distance:.4,time:2,isKey:!1},{instruction:"Look for the open parking area on your right",distance:.2,time:1,isKey:!0,imageKey:t[0]||null},{instruction:"Enter through the main entrance",distance:.1,time:1,isKey:!0,imageKey:t[1]||null},{instruction:"Park in any available space marked with white lines",distance:.05,time:2,isKey:!0,imageKey:t[2]||null},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];case"walking":return[{instruction:"Head south-east on the pedestrian walkway",distance:.2,time:3,isKey:!1},{instruction:"Cross at the pedestrian crossing",distance:.1,time:2,isKey:!1},{instruction:"Continue straight on Jalan Kampung Pandan",distance:.3,time:4,isKey:!1},{instruction:"The outdoor parking area will be visible on your right",distance:.1,time:1,isKey:!0,imageKey:t[0]||null},{instruction:"Walk toward the entrance",distance:.1,time:2,isKey:!0,imageKey:t[1]||null},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];case"transit":return[{instruction:"Walk to the nearest bus stop on Jalan Kampung Pandan (150m)",distance:.15,time:2,isKey:!1},{instruction:"Take bus T250 toward Kampung Pandan",distance:1.2,time:10,isKey:!1},{instruction:"Exit at Kampung Pandan Central stop",distance:.1,time:1,isKey:!1},{instruction:"Walk east for 200m",distance:.2,time:3,isKey:!1},{instruction:"The outdoor parking area will be visible ahead",distance:.1,time:2,isKey:!0,imageKey:t[0]||null},{instruction:"Enter through the main entrance",distance:.05,time:1,isKey:!0,imageKey:t[1]||null},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];default:return eM(e,"driving")}}(a,t);case 22:return function(e,a){let t=eb[e]||[];switch(a){case"driving":return[{instruction:"Head toward Jalan Kampung Pandan Dalam",distance:.4,time:2,isKey:!1},{instruction:"Continue straight past the small market",distance:.3,time:1,isKey:!1},{instruction:"Look for the designated roadside parking zone",distance:.2,time:1,isKey:!0,imageKey:t[0]||null},{instruction:"Park parallel to the curb in marked spaces only",distance:.1,time:2,isKey:!0,imageKey:t[1]||null},{instruction:"Pay at the parking meter located every 50m",distance:.05,time:3,isKey:!0,imageKey:t[2]||null},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];case"walking":return[{instruction:"Walk east on the main street",distance:.15,time:2,isKey:!1},{instruction:"Turn right at the convenience store",distance:.15,time:2,isKey:!1},{instruction:"Continue straight for 200m",distance:.2,time:3,isKey:!1},{instruction:"Look for the roadside parking area",distance:.1,time:1,isKey:!0,imageKey:t[0]||null},{instruction:"The parking zone is clearly marked with white lines",distance:.05,time:1,isKey:!0,imageKey:t[1]||null},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];case"transit":return[{instruction:"Take bus B112 toward Kampung Pandan",distance:1.5,time:12,isKey:!1},{instruction:"Exit at the Kampung Pandan Dalam stop",distance:.1,time:1,isKey:!1},{instruction:"Walk north for 150m",distance:.15,time:2,isKey:!1},{instruction:"Turn right at the intersection",distance:.1,time:1,isKey:!1},{instruction:"The roadside parking area will be on your left",distance:.1,time:1,isKey:!0,imageKey:t[0]||null},{instruction:"Look for cars parked along the designated zones",distance:.05,time:1,isKey:!0,imageKey:t[1]||null},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];default:return eM(e,"driving")}}(a,t);case 23:return function(e,a){let t=eb[e]||[];switch(a){case"driving":return[{instruction:"Head toward Jalan Ang Seng",distance:.3,time:2,isKey:!1},{instruction:"Turn into the Alila Bangsar hotel entrance",distance:.2,time:1,isKey:!0,imageKey:t[0]||null},{instruction:"Follow signs to the hotel parking structure",distance:.1,time:1,isKey:!1},{instruction:"Take parking ticket at barrier",distance:.05,time:1,isKey:!0},{instruction:"Park on available levels B1-B3",distance:.05,time:2,isKey:!1},{instruction:"Take elevator to Level 41 for Entier French Dining",distance:0,time:3,isKey:!1},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];case"walking":return[{instruction:"Walk toward Alila Bangsar hotel entrance",distance:.2,time:3,isKey:!0,imageKey:t[0]||null},{instruction:"Enter through the main lobby doors",distance:.1,time:1,isKey:!1},{instruction:"Take the elevator directly to Level 41",distance:.05,time:2,isKey:!1},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];case"transit":return[{instruction:"Take LRT to Bangsar station",distance:1,time:15,isKey:!1},{instruction:"Exit station toward Jalan Ang Seng",distance:.1,time:2,isKey:!1},{instruction:"Walk to Alila Bangsar hotel entrance (200m)",distance:.2,time:3,isKey:!0,imageKey:t[0]||null},{instruction:"Enter through the main lobby",distance:.05,time:1,isKey:!1},{instruction:"Take the elevator to Level 41",distance:.05,time:2,isKey:!1},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];default:return eM(e,"driving")}}(a,t);default:return eM(a,t)}};function eM(e,a){let t=eb[e]||[];switch(a){case"driving":return[{instruction:"Exit current location to main road",distance:.2,time:1,isKey:!1},{instruction:"Continue toward destination",distance:.8,time:3,isKey:!1},{instruction:"Follow signs to parking area",distance:.5,time:4,isKey:!0,imageKey:t[0]||null},{instruction:"Turn into parking entrance",distance:.1,time:1,isKey:!0,imageKey:t[1]||null},{instruction:"Look for available spots",distance:.1,time:2,isKey:!1},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];case"walking":return[{instruction:"Walk toward main street",distance:.1,time:2,isKey:!1},{instruction:"Continue straight for 400m",distance:.4,time:6,isKey:!1},{instruction:"Cross at the pedestrian crossing",distance:.1,time:2,isKey:!1},{instruction:"Follow signs to destination",distance:.3,time:5,isKey:!0,imageKey:t[0]||null},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];case"transit":return[{instruction:"Walk to the nearest transit stop",distance:.2,time:3,isKey:!1},{instruction:"Take the next available transport toward destination",distance:1.5,time:15,isKey:!1},{instruction:"Exit at the stop nearest to destination",distance:.1,time:1,isKey:!1},{instruction:"Walk toward destination",distance:.3,time:5,isKey:!0,imageKey:t[0]||null},{instruction:"Arrive at destination",distance:0,time:0,isKey:!1}];default:return[{instruction:"Directions not available for this travel mode",distance:0,time:0,isKey:!1}]}}function eN(e){let{open:a,onOpenChange:t,spot:n,userLocation:r}=e,[l,o]=(0,s.useState)("driving"),[d,c]=(0,s.useState)([]),[m,u]=(0,s.useState)([]),g=(0,s.useMemo)(()=>n?ej(n.id,n.name,l):[],[n,l]);if((0,s.useEffect)(()=>{c(g)},[g]),!n)return null;let h=(0,s.useMemo)(()=>d.reduce((e,a)=>e+a.distance,0),[d]),x=(0,s.useMemo)(()=>d.reduce((e,a)=>e+a.time,0),[d]),f=(e=>{switch(e){case"driving":default:return{icon:(0,i.jsx)(eu.A,{size:16}),label:"Drive",timeMultiplier:1,costRange:(null==n?void 0:n.pricePerHour)||"RM5-10/hour"};case"walking":return{icon:(0,i.jsx)(eg.A,{size:16}),label:"Walk",timeMultiplier:1.2,costRange:"Free"};case"transit":return{icon:(0,i.jsx)(ep.A,{size:16}),label:"Transit",timeMultiplier:.8,costRange:"RM2-5"}}})(l),y=e=>{m.includes(e)?u(m.filter(a=>a!==e)):u([...m,e])};return(0,i.jsx)(E,{open:a,onOpenChange:t,children:(0,i.jsxs)(z,{side:"right",className:"w-full max-w-full p-3 overflow-y-auto",children:[(0,i.jsxs)(J,{className:"text-left",children:[(0,i.jsx)(U,{className:"text-lg flex justify-between items-center",children:(0,i.jsxs)("span",{children:["Navigation to ",n.name]})}),(0,i.jsx)(B,{className:"flex items-center text-sm",children:(0,i.jsx)("span",{children:n.address})})]}),(0,i.jsx)("div",{className:"my-4",children:(0,i.jsxs)(et,{defaultValue:"directions",className:"w-full",children:[(0,i.jsxs)(ei,{className:"grid grid-cols-2 mb-2 w-full",children:[(0,i.jsx)(es,{value:"directions",children:"Directions"}),(0,i.jsx)(es,{value:"details",children:"Details"})]}),(0,i.jsxs)(en,{value:"directions",className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex border rounded-md overflow-hidden w-full",children:[(0,i.jsxs)(A,{onClick:()=>o("driving"),variant:"driving"===l?"default":"ghost",className:"flex-1 rounded-none h-9 gap-1 px-1 text-xs",children:[(0,i.jsx)(eu.A,{size:16}),(0,i.jsx)("span",{className:"text-xs",children:"Drive"})]}),(0,i.jsxs)(A,{onClick:()=>o("walking"),variant:"walking"===l?"default":"ghost",className:"flex-1 rounded-none h-9 gap-1 px-1 text-xs",children:[(0,i.jsx)(eg.A,{size:16}),(0,i.jsx)("span",{className:"text-xs",children:"Walk"})]}),(0,i.jsxs)(A,{onClick:()=>o("transit"),variant:"transit"===l?"default":"ghost",className:"flex-1 rounded-none h-9 gap-1 px-1 text-xs",children:[(0,i.jsx)(ep.A,{size:16}),(0,i.jsx)("span",{className:"text-xs",children:"Transit"})]})]}),(0,i.jsx)(C,{className:"bg-gray-50",children:(0,i.jsx)(L,{className:"p-2",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-sm font-medium",children:[ex(h)," total"]}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[Math.round(x*f.timeMultiplier)," min (",f.label,")"]})]}),(0,i.jsxs)(K,{variant:"outline",className:"bg-white",children:[(0,i.jsx)(p.A,{size:12,className:"mr-1"}),n.estimatedDriveTimeMin," min"]})]})})}),(0,i.jsx)("div",{className:"space-y-2",children:d.map((e,a)=>{let t=m.includes(a),s=e.isKey&&e.imageKey&&ev[e.imageKey];return(0,i.jsxs)("div",{className:"border rounded-md overflow-hidden",children:[(0,i.jsxs)("div",{className:"p-3 flex justify-between items-center cursor-pointer ".concat(s?"hover:bg-gray-50":""),onClick:()=>s?y(a):null,children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"bg-gray-200 h-6 w-6 rounded-full flex items-center justify-center mr-3 text-xs",children:a+1}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm",children:e.instruction}),(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:[ex(e.distance)," \xb7 ",e.time," min"]})]})]}),s&&(0,i.jsx)(q.A,{size:18,className:"transition-transform ".concat(t?"rotate-180":"")})]}),s&&t&&e.imageKey&&ev[e.imageKey]&&(0,i.jsxs)("div",{className:"px-3 pb-3",children:[(0,i.jsx)("div",{className:"relative h-32 w-full rounded-md overflow-hidden",children:(0,i.jsx)("img",{src:ev[e.imageKey].url,alt:ev[e.imageKey].caption,className:"object-cover w-full h-full"})}),(0,i.jsxs)("div",{className:"mt-2 text-xs",children:[(0,i.jsx)("p",{className:"font-medium",children:ev[e.imageKey].caption}),(0,i.jsxs)("p",{className:"text-gray-500 mt-1",children:[ev[e.imageKey].contributor," \xb7 ",ev[e.imageKey].timestamp]})]})]})]},a)})}),(0,i.jsxs)("div",{className:"bg-blue-50 p-2 rounded-md text-xs flex items-start",children:[(0,i.jsx)(eh.A,{size:14,className:"text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-blue-800",children:"Images are provided by the ParkLah community to help with navigation."}),(0,i.jsx)("p",{className:"text-blue-600 mt-1",children:"Want to contribute? Take photos of key locations when you park and share them with others!"})]})]})]}),(0,i.jsx)(en,{value:"details",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Entrances"}),n.entrances&&n.entrances.length>0?(0,i.jsx)("div",{className:"space-y-2",children:n.entrances.map((e,a)=>(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,i.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]},a))}):(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"No entrance information available"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Pricing"}),(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-sm",children:"Hourly rate:"}),(0,i.jsxs)("span",{className:"text-sm font-medium",children:["RM",n.pricePerHour,".00"]})]}),(0,i.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,i.jsx)("span",{className:"text-sm",children:"Estimated 2 hours:"}),(0,i.jsxs)("span",{className:"text-sm font-medium",children:["RM",2*n.pricePerHour,".00"]})]})]})]}),(0,i.jsx)(A,{variant:"outline",className:"w-full",children:"Share this parking location"})]})})]})}),(0,i.jsx)(I,{className:"justify-center mt-2 pb-safe",children:(0,i.jsx)(A,{className:"w-full h-10",size:"sm",children:"Open in Google Maps"})})]})})}let ek=R.bL;R.l9;let ew=R.ZL,eP=R.bm,eA=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(R.hJ,{ref:a,className:w("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});eA.displayName=R.hJ.displayName;let eS=s.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,i.jsxs)(ew,{children:[(0,i.jsx)(eA,{}),(0,i.jsxs)(R.UC,{ref:a,className:w("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,(0,i.jsxs)(R.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(x.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eS.displayName=R.UC.displayName;let eC=e=>{let{className:a,...t}=e;return(0,i.jsx)("div",{className:w("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};eC.displayName="DialogHeader";let eL=e=>{let{className:a,...t}=e;return(0,i.jsx)("div",{className:w("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};eL.displayName="DialogFooter";let eT=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(R.hE,{ref:a,className:w("text-lg font-semibold leading-none tracking-tight",t),...s})});eT.displayName=R.hE.displayName;let eK=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(R.VY,{ref:a,className:w("text-sm text-muted-foreground",t),...s})});eK.displayName=R.VY.displayName;let eR=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)("textarea",{className:w("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s})});eR.displayName="Textarea";var eE=t(2486),eH=t(7930);let e_=[{id:"1",senderId:"ANON-123",receiverId:"USER-1",message:"Hi, you're blocking my car at Pavilion B2. Can you move it?",timestamp:new Date("2025-05-28T14:30:00"),isRead:!1},{id:"2",senderId:"ANON-456",receiverId:"USER-1",message:"Your headlights are on in the KLCC parking lot.",timestamp:new Date("2025-05-28T15:45:00"),isRead:!1}],eD=function(){let{onOpenMessages:e,onOpenScanner:a,onUnreadCountChange:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,r]=(0,s.useState)(!1),[l,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(null),[m,u]=(0,s.useState)(""),[g,p]=(0,s.useState)(e_),[h,f]=(0,s.useState)(0),[y,j]=(0,s.useState)("inbox");(0,s.useEffect)(()=>{e&&e(()=>o(!0)),a&&a(()=>r(!0));let i=g.filter(e=>!e.isRead).length;f(i),t&&t(i)},[]),(0,s.useEffect)(()=>{f(g.filter(e=>!e.isRead).length)},[g]);let M=e=>{e&&e.startsWith("PARKLAH-")&&(c(e.substring(8)),r(!1),o(!0),j("compose"))},N=e=>{p(g.map(a=>a.id===e?{...a,isRead:!0}:a))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ek,{open:n,onOpenChange:r,children:(0,i.jsxs)(eS,{className:"max-w-full h-[100vh] sm:min-h-fit p-0 sm:p-6 flex flex-col",children:[(0,i.jsx)(eC,{className:"p-4 border-b bg-white z-10",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(eT,{children:"Scan ParkLah QR Code"}),(0,i.jsx)(eK,{children:"Scan the QR code on another driver's car to send them an anonymous message."})]}),(0,i.jsx)(eP,{asChild:!0,children:(0,i.jsx)(A,{variant:"ghost",size:"icon",children:(0,i.jsx)(x.A,{size:18})})})]})}),(0,i.jsx)("div",{className:"p-4 flex flex-col flex-1 overflow-y-auto",children:(0,i.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center flex-1 flex flex-col justify-center",children:[(0,i.jsx)(v.A,{size:64,className:"mx-auto mb-4 text-gray-400"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Camera access would be requested here"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(A,{variant:"outline",className:"w-full",onClick:()=>M("PARKLAH-12345"),children:"Simulate Scan: Car #12345"}),(0,i.jsx)(A,{variant:"outline",className:"w-full",onClick:()=>M("PARKLAH-67890"),children:"Simulate Scan: Car #67890"})]})]})}),(0,i.jsx)("p",{className:"text-xs text-center text-gray-500 p-4 border-t mt-auto",children:"QR codes can be found on the ParkLah sticker in the car window"})]})}),(0,i.jsx)(ek,{open:l,onOpenChange:o,children:(0,i.jsxs)(eS,{className:"max-w-full h-[100vh] sm:min-h-fit p-0 sm:p-6 flex flex-col",children:[(0,i.jsx)(eC,{className:"p-4 border-b bg-white z-10",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(eT,{children:"compose"===y?"Message to Driver #".concat(d):"Your Messages"}),"compose"===y?(0,i.jsx)(A,{variant:"ghost",size:"icon",onClick:()=>{j("inbox"),c(null),u("")},children:(0,i.jsx)(x.A,{size:18})}):(0,i.jsx)(eP,{asChild:!0,children:(0,i.jsx)(A,{variant:"ghost",size:"icon",children:(0,i.jsx)(x.A,{size:18})})})]})}),"compose"===y?(0,i.jsxs)("div",{className:"space-y-4 p-4 flex flex-col flex-1 overflow-y-auto",children:[(0,i.jsx)(eR,{placeholder:"Type your message here...",className:"flex-1 min-h-[200px]",value:m,onChange:e=>u(e.target.value)}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"This message will be sent anonymously. The driver will not see your personal information."}),(0,i.jsxs)(eL,{className:"pt-4 mt-auto",children:[(0,i.jsx)(eP,{asChild:!0,children:(0,i.jsx)(A,{variant:"outline",children:"Cancel"})}),(0,i.jsxs)(A,{onClick:()=>{m.trim()&&d&&(p([...g,{id:Date.now().toString(),senderId:"USER-1",receiverId:d,message:m,timestamp:new Date,isRead:!1}]),u(""),j("inbox"),c(null))},disabled:!m.trim(),children:[(0,i.jsx)(eE.A,{className:"mr-2 h-4 w-4"}),"Send Message"]})]})]}):(0,i.jsxs)(et,{defaultValue:"inbox",className:"flex flex-col flex-1 overflow-hidden",children:[(0,i.jsxs)(ei,{className:"grid grid-cols-2 mb-2 sticky top-0 bg-white z-10",children:[(0,i.jsx)(es,{value:"inbox",children:"Inbox"}),(0,i.jsx)(es,{value:"sent",children:"Sent"})]}),(0,i.jsx)(en,{value:"inbox",className:"flex-1 overflow-y-auto p-4",children:g.filter(e=>"USER-1"===e.receiverId).length>0?(0,i.jsx)("div",{className:"space-y-3",children:g.filter(e=>"USER-1"===e.receiverId).sort((e,a)=>a.timestamp.getTime()-e.timestamp.getTime()).map(e=>(0,i.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.isRead?"bg-gray-100":"bg-blue-50 border-l-4 border-blue-500"),onClick:()=>N(e.id),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(eH.A,{size:16,className:"mr-1"}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"Anonymous Driver"})]}),(0,i.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,i.jsx)("p",{className:"text-sm",children:e.message})]},e.id))}):(0,i.jsxs)("div",{className:"text-center py-10",children:[(0,i.jsx)(b.A,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,i.jsx)("p",{className:"text-gray-500",children:"No messages in your inbox"})]})}),(0,i.jsx)(en,{value:"sent",className:"flex-1 overflow-y-auto p-4",children:g.filter(e=>"USER-1"===e.senderId).length>0?(0,i.jsx)("div",{className:"space-y-3",children:g.filter(e=>"USER-1"===e.senderId).sort((e,a)=>a.timestamp.getTime()-e.timestamp.getTime()).map(e=>(0,i.jsxs)("div",{className:"p-3 rounded-lg bg-gray-100",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("span",{className:"text-sm font-medium",children:["To: Driver #",e.receiverId]})}),(0,i.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,i.jsx)("p",{className:"text-sm",children:e.message})]},e.id))}):(0,i.jsxs)("div",{className:"text-center py-10",children:[(0,i.jsx)(eE.A,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),(0,i.jsx)("p",{className:"text-gray-500",children:"No messages sent yet"})]})})]})]})})]})};var eF=t(9074),ez=t(2239),eJ=t(547);let eI=eJ.bL,eU=eJ.l9,eB=s.forwardRef((e,a)=>{let{className:t,align:s="center",sideOffset:n=4,...r}=e;return(0,i.jsx)(eJ.ZL,{children:(0,i.jsx)(eJ.UC,{ref:a,align:s,sideOffset:n,className:w("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})});eB.displayName=eJ.UC.displayName;let eO=e=>{let{selected:a,onSelect:t,initialFocus:n,mode:r="single"}=e,l=new Date,o=l.getMonth(),d=l.getFullYear(),[c,m]=s.useState(o),[u,g]=s.useState(d),p=new Date(u,c+1,0).getDate(),h=new Date(u,c,1).getDay(),x=e=>{t(new Date(u,c,e))},f=e=>!!a&&a.getDate()===e&&a.getMonth()===c&&a.getFullYear()===u,y=[];for(let e=0;e<h;e++)y.push((0,i.jsx)("div",{className:"p-2"},"empty-".concat(e)));for(let e=1;e<=p;e++){let a=f(e),t=e===l.getDate()&&c===l.getMonth()&&u===l.getFullYear();y.push((0,i.jsx)("button",{className:"p-2 rounded-md text-sm ".concat(a?"bg-primary text-primary-foreground":t?"border border-primary":"hover:bg-accent"),onClick:()=>x(e),children:e},"day-".concat(e)))}return(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("button",{onClick:()=>{0===c?(m(11),g(u-1)):m(c-1)},className:"p-1 rounded-md hover:bg-accent",children:"<"}),(0,i.jsxs)("div",{children:[["January","February","March","April","May","June","July","August","September","October","November","December"][c]," ",u]}),(0,i.jsx)("button",{onClick:()=>{11===c?(m(0),g(u+1)):m(c+1)},className:"p-1 rounded-md hover:bg-accent",children:">"})]}),(0,i.jsx)("div",{className:"grid grid-cols-7 gap-1 text-xs text-center mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,i.jsx)("div",{className:"font-medium",children:e},e))}),(0,i.jsx)("div",{className:"grid grid-cols-7 gap-1",children:y})]})};function eq(e){let{value:a,onChange:t,className:n}=e,[r,l]=s.useState(a);return s.useEffect(()=>{l(a)},[a]),(0,i.jsxs)("div",{className:w("flex items-center space-x-2",n),children:[(0,i.jsxs)(eI,{children:[(0,i.jsx)(eU,{asChild:!0,children:(0,i.jsxs)(A,{variant:"outline",className:w("justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[(0,i.jsx)(eF.A,{className:"mr-2 h-4 w-4"}),r?(0,ez.A)(r,"PPP"):(0,i.jsx)("span",{children:"Pick a date"})]})}),(0,i.jsx)(eB,{className:"w-auto p-0",align:"start",children:(0,i.jsx)(eO,{mode:"single",selected:r,onSelect:e=>{if(!e)return;let a=new Date(e);a.setHours(r.getHours()),a.setMinutes(r.getMinutes()),l(a),t(a)},initialFocus:!0})})]}),(0,i.jsx)("input",{type:"time",value:(0,ez.A)(r,"HH:mm"),onChange:e=>{let a=e.target.value;if(!a)return;let[i,s]=a.split(":").map(Number),n=new Date(r);n.setHours(i),n.setMinutes(s),l(n),t(n)},className:"rounded-md border border-input bg-background px-3 py-2 text-sm"})]})}let eV=0,eW=new Map,eG=e=>{if(eW.has(e))return;let a=setTimeout(()=>{eW.delete(e),eX({type:"REMOVE_TOAST",toastId:e})},1e6);eW.set(e,a)},eY=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?eG(t):e.toasts.forEach(e=>{eG(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},eQ=[],eZ={toasts:[]};function eX(e){eZ=eY(eZ,e),eQ.forEach(e=>{e(eZ)})}function e$(e){let{...a}=e,t=(eV=(eV+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>eX({type:"DISMISS_TOAST",toastId:t});return eX({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||i()}}}),{id:t,dismiss:i,update:e=>eX({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function e0(){let[e,a]=s.useState(eZ);return s.useEffect(()=>(eQ.push(a),()=>{let e=eQ.indexOf(a);e>-1&&eQ.splice(e,1)}),[e]),{...e,toast:e$,dismiss:e=>eX({type:"DISMISS_TOAST",toastId:e})}}let e1=e=>{let{userCoupons:a=[],onAddCoupon:t,onDeleteCoupon:n}=e,[r,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(new Date),[m,u]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),{toast:f}=e0();(0,s.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;a.forEach(a=>{let i=a.expiryTime.getTime()-e.getTime(),s=Math.floor(i/36e5);if((3===s||1===s||i>0&&i<=18e5)&&!y(a)){let r=s>0?"".concat(s," hour").concat(1!==s?"s":""):"".concat(Math.floor(i/6e4)," minutes");if(f({title:"Coupon Expiring Soon!",description:"Your parking coupon at ".concat(a.location," will expire in ").concat(r,". Top up to avoid getting fined."),variant:"destructive",duration:1e4}),t){let e=[...a.notifiedAt||[],new Date],i={label:a.label,expiryTime:a.expiryTime,location:a.location,notifiedAt:e};n&&(n(a.id),t(i))}n&&a.expiryTime<e&&n(a.id)}})},6e4);return()=>clearInterval(e)},[a,f,t,n]);let y=e=>{if(!e.notifiedAt||0===e.notifiedAt.length)return!1;let a=new Date,t=e.notifiedAt[e.notifiedAt.length-1];return a.getTime()-t.getTime()<9e5},v=[...a].sort((e,a)=>e.expiryTime.getTime()-a.expiryTime.getTime());return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex flex-col space-y-3 mt-4",children:v.length>0?v.map(e=>{let a=e.expiryTime.getTime()-new Date().getTime()<36e5;return(0,i.jsx)(C,{className:"relative overflow-hidden",children:(0,i.jsx)(L,{className:"p-3",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("div",{className:"pr-6",children:[(0,i.jsx)("h3",{className:"font-semibold text-sm",children:e.label}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:e.location}),(0,i.jsxs)("div",{className:"flex items-center mt-1 text-xs",children:[(0,i.jsx)(p.A,{className:"w-3 h-3 mr-1"}),(0,i.jsxs)("span",{children:["Expires: ",e.expiryTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})]})]})]}),a&&(0,i.jsx)("div",{className:"flex items-center text-red-500 absolute top-0 right-7",children:(0,i.jsx)(o.A,{className:"w-4 h-4"})}),n&&(0,i.jsxs)(A,{variant:"ghost",size:"icon",onClick:()=>n(e.id),className:"h-5 w-5 absolute top-0 right-0 opacity-60 hover:opacity-100",children:[(0,i.jsx)(x.A,{className:"h-2 w-2"}),(0,i.jsx)("span",{className:"sr-only",children:"Delete coupon"})]})]})})},e.id)}):(0,i.jsx)("div",{className:"text-center py-6 text-sm text-muted-foreground",children:"No active parking coupons to display"})}),(0,i.jsx)(A,{variant:"outline",className:"w-full mt-3",onClick:()=>l(!0),children:"Add Parking Coupon"}),(0,i.jsx)(ek,{open:r,onOpenChange:l,children:(0,i.jsxs)(eS,{className:"max-w-[350px] sm:max-w-md",children:[(0,i.jsx)(eC,{children:(0,i.jsx)(eT,{children:"Add Parking Coupon"})}),(0,i.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{htmlFor:"label",className:"text-sm font-medium mb-1",children:"Label"}),(0,i.jsx)("input",{type:"text",id:"label",className:"border rounded p-2 text-sm",placeholder:"e.g., Car at KLCC",value:g,onChange:e=>h(e.target.value)})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{htmlFor:"location",className:"text-sm font-medium mb-1",children:"Location"}),(0,i.jsx)("input",{type:"text",id:"location",className:"border rounded p-2 text-sm",placeholder:"e.g., KLCC P2 Basement",value:m,onChange:e=>u(e.target.value)})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"text-sm font-medium mb-1",children:"Expiry Time"}),(0,i.jsx)(eq,{value:d,onChange:c,className:"w-full"})]})]}),(0,i.jsxs)(eL,{children:[(0,i.jsx)(A,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,i.jsx)(A,{onClick:()=>{if(!g.trim()){f({title:"Error",description:"Please enter a label for your coupon",variant:"destructive"});return}if(!m.trim()){f({title:"Error",description:"Please enter the parking location",variant:"destructive"});return}if(d.getTime()<=new Date().getTime()){f({title:"Error",description:"Expiry time must be in the future",variant:"destructive"});return}t&&(t({label:g.trim(),expiryTime:d,location:m.trim(),notifiedAt:[]}),f({title:"Coupon Added",description:"You'll be reminded before ".concat(g," expires")})),h(""),u(""),c(new Date),l(!1)},children:"Add Coupon"})]})]})})]})};var e2=t(4884);let e5=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)(e2.bL,{className:w("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:a,children:(0,i.jsx)(e2.zi,{className:w("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});e5.displayName=e2.bL.displayName;let e8=e=>{let{userLocation:a,parkingSpots:t,radius:n=2,maxNotifications:r=10,isSubscribed:l=!1}=e,[o,d]=(0,s.useState)([]),[c,m]=(0,s.useState)(!0),{toast:u}=e0(),g=(e,a,t,i)=>{let s=(t-e)*Math.PI/180,n=(i-a)*Math.PI/180,r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371},p=()=>a?t.filter(e=>g(a.lat,a.lng,e.lat,e.lng)<=n):[];(0,s.useEffect)(()=>{if(!a||!c||!l)return;let e=p();if(0===e.length)return;let t=setInterval(()=>{let a=Math.floor(Math.random()*e.length),t=e[a];if(.2>Math.random()){let e=.5>Math.random(),a=new Date().getHours(),i=t.trafficFrequency[a]||50,s=Math.max(0,Math.floor(t.capacity*(1-i/100))),n={id:"notif-".concat(Date.now(),"-").concat(t.id),parkingId:t.id,parkingName:t.name,message:e?"".concat(s," spots just became available at ").concat(t.name):"".concat(t.name," is filling up quickly! Only ").concat(s," spots left"),timestamp:new Date,read:!1};d(e=>[n,...e].slice(0,r)),u({title:e?"New Parking Available!":"Parking Alert!",description:n.message,duration:5e3})}},6e4);return()=>clearInterval(t)},[a,t,c,l,n]);let h=e=>{d(a=>a.map(a=>a.id===e?{...a,read:!0}:a))},f=e=>{d(a=>a.filter(a=>a.id!==e))},y=o.filter(e=>!e.read).length;return l?(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"flex items-center space-x-2",children:y>0&&(0,i.jsx)("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-primary text-primary-foreground rounded-full text-xs",children:y})}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(e5,{checked:c,onCheckedChange:m,id:"notifications-toggle"}),(0,i.jsx)("label",{htmlFor:"notifications-toggle",className:"text-xs cursor-pointer",children:c?"On":"Off"})]})]}),(0,i.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:o.length>0?(0,i.jsxs)(i.Fragment,{children:[o.map(e=>(0,i.jsx)(C,{className:"".concat(e.read?"bg-background":"bg-accent/20"," transition-colors"),children:(0,i.jsx)(L,{className:"p-2 text-sm",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("div",{className:"cursor-pointer pr-6",onClick:()=>h(e.id),children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,i.jsx)(eH.A,{className:"h-3 w-3"}),(0,i.jsx)("span",{className:"font-medium",children:e.parkingName})]}),(0,i.jsx)("p",{className:"text-xs",children:e.message}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,i.jsxs)(A,{variant:"ghost",size:"icon",className:"h-5 w-5 absolute top-0 right-0 opacity-60 hover:opacity-100",onClick:()=>f(e.id),children:[(0,i.jsx)(x.A,{className:"h-2 w-2"}),(0,i.jsx)("span",{className:"sr-only",children:"Delete"})]})]})})},e.id)),o.length>1&&(0,i.jsx)(A,{variant:"ghost",size:"sm",className:"text-xs w-full",onClick:()=>{d([])},children:"Clear all notifications"})]}):(0,i.jsx)("div",{className:"text-center py-6 text-sm text-muted-foreground",children:c?"No parking updates yet. We'll notify you when spaces become available nearby.":"Notifications are currently disabled"})})]}):(0,i.jsx)(C,{className:"border-dashed border-2",children:(0,i.jsx)(L,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex flex-col items-center text-center space-y-2",children:[(0,i.jsx)(b.A,{className:"h-8 w-8 text-muted-foreground"}),(0,i.jsx)("h3",{className:"font-semibold",children:"Live Parking Updates"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upgrade to premium to receive notifications about parking availability near you."}),(0,i.jsx)(A,{className:"mt-2",variant:"default",children:"Upgrade to Premium"})]})})})},e6=[{id:1,name:"Pavilion KL Parking",address:"Jalan Bukit Bintang, Bukit Bintang",lat:3.1492139,lng:101.7135278,capacity:1800,pricePerHour:6,isLegal:!0,type:"mall",walkTime:2,peakHours:"10AM-10PM",availabilityDescription:"Good chance of finding parking",findingProbability:75,trafficFrequency:[20,15,10,8,12,25,45,65,80,85,90,95,85,75,70,80,85,90,85,70,55,40,30,25],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Main Entrance",description:"Via Jalan Bukit Bintang"},{name:"Side Entrance",description:"Via Jalan Raja Chulan"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Low"},{time:"Afternoon (12PM-6PM)",status:"High"},{time:"Evening (6PM-10PM)",status:"Very High"},{time:"Night (10PM-12AM)",status:"Moderate"}],tips:"Best to arrive before 11AM on weekends."},{id:2,name:"KLCC Suria Mall Parking",address:"Kuala Lumpur City Centre, 50088",lat:3.1573751,lng:101.7123808,capacity:5400,pricePerHour:5,isLegal:!0,type:"mall",walkTime:5,peakHours:"9AM-11PM",availabilityDescription:"Large parking complex with many spots",findingProbability:85,trafficFrequency:[15,10,8,5,10,20,40,70,85,95,98,95,90,85,80,85,90,95,90,75,60,45,30,20],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"P1 Entrance",description:"Via Jalan Ampang"},{name:"P2 Entrance",description:"Via Persiaran KLCC"},{name:"Mall Entrance",description:"Direct mall access"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Moderate"},{time:"Afternoon (12PM-6PM)",status:"High"},{time:"Evening (6PM-10PM)",status:"Very High"},{time:"Night (10PM-12AM)",status:"Low"}],tips:"Very crowded on weekends. Use P2 entrance for less congestion."},{id:3,name:"Street Parking - Jalan Alor",address:"Jalan Alor, Bukit Bintang, 50200",lat:3.1458721907041074,lng:101.70890872430671,capacity:40,pricePerHour:3,isLegal:!0,type:"street",walkTime:1,peakHours:"6PM-12AM",availabilityDescription:"Few spots, arrive early",findingProbability:35,trafficFrequency:[10,8,5,5,8,15,25,35,40,45,50,55,60,65,70,75,85,95,90,80,70,50,30,15],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"From Jalan Bukit Bintang",description:"Turn right into Jalan Alor"},{name:"From Jalan Changkat",description:"Direct access"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Low"},{time:"Afternoon (12PM-6PM)",status:"Low"},{time:"Evening (6PM-10PM)",status:"Very High"},{time:"Night (10PM-2AM)",status:"High"}],tips:"Food street gets very busy after 7PM. Limited spots, arrive early."},{id:4,name:"Unauthorized - Jalan P. Ramlee",address:"Jalan P. Ramlee, Golden Triangle, 50250",lat:3.1550234,lng:101.7086407,capacity:15,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:2,peakHours:"High risk during office hours",availabilityDescription:"Risky but often available",findingProbability:80,trafficFrequency:[5,5,5,5,10,20,40,80,90,85,80,75,70,75,80,85,90,85,70,50,30,20,10,8],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Roadside",description:"⚠️ Risk of summons RM50-150"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Moderate Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Not recommended. High chance of summons during business hours."},{id:5,name:"Berjaya Times Square Parking",address:"1, Jalan Imbi, Bukit Bintang, 55100",lat:3.142222,lng:101.710556,capacity:2200,pricePerHour:4,isLegal:!0,type:"mall",walkTime:4,peakHours:"11AM-9PM",availabilityDescription:"Plenty of spaces",findingProbability:90,trafficFrequency:[15,12,10,8,12,20,35,50,60,65,70,75,70,65,60,65,70,75,70,60,45,35,25,20],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Main Entrance",description:"Via Jalan Imbi"},{name:"West Entrance",description:"Via Jalan Pudu"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Low"},{time:"Afternoon (12PM-6PM)",status:"Moderate"},{time:"Evening (6PM-10PM)",status:"High"},{time:"Night (10PM-12AM)",status:"Low"}],tips:"Large capacity, usually has spaces available. Good backup option."},{id:6,name:"Starling Mall Parking",address:"No. 6, Jalan SS 21/37, Damansara Utama, 47400",lat:3.134716,lng:101.623136,capacity:1800,pricePerHour:3,isLegal:!0,type:"mall",walkTime:3,peakHours:"11AM-9PM",availabilityDescription:"Good availability on weekdays",findingProbability:80,trafficFrequency:[10,8,5,5,10,20,40,60,70,75,80,85,80,75,70,75,85,90,85,70,50,35,20,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Main Entrance",description:"Via SS21/37"},{name:"LG Entrance",description:"Via SS21/1A"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Low"},{time:"Afternoon (12PM-6PM)",status:"Moderate"},{time:"Evening (6PM-10PM)",status:"High"},{time:"Night (10PM-12AM)",status:"Low"}],tips:"Validate parking at the mall information counter for discounted rates."},{id:7,name:"Uptown Street Parking",address:"Jalan SS 21/39, Damansara Utama, 47400",lat:3.134444,lng:101.621389,capacity:120,pricePerHour:2,isLegal:!0,type:"street",walkTime:1,peakHours:"12PM-2PM, 7PM-10PM",availabilityDescription:"Limited street parking",findingProbability:45,trafficFrequency:[15,10,8,5,10,30,50,70,80,70,65,75,80,65,60,70,85,95,90,80,60,40,25,15],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Roadside",description:"Along Jalan SS21/39"},{name:"Side Streets",description:"Around Uptown area"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Moderate"},{time:"Afternoon (12PM-6PM)",status:"High"},{time:"Evening (6PM-10PM)",status:"Very High"},{time:"Night (10PM-12AM)",status:"Moderate"}],tips:"Pay using Touch 'n Go eWallet or the parking machine. Active enforcement in this area."},{id:8,name:"1 Utama Shopping Centre",address:"1, Lebuh Bandar Utama, Bandar Utama, 47800",lat:3.14815,lng:101.6158417,capacity:1e4,pricePerHour:3,isLegal:!0,type:"mall",walkTime:7,peakHours:"11AM-10PM",availabilityDescription:"Massive parking complex",findingProbability:95,trafficFrequency:[10,5,5,5,8,15,35,55,70,80,85,90,95,90,85,80,85,90,80,65,50,35,25,15],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"New Wing",description:"Via Lebuh Bandar Utama"},{name:"Old Wing",description:"Via Dataran Bandar Utama"},{name:"Centre Court",description:"Via Lebuh Bandar Utama"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Low"},{time:"Afternoon (12PM-6PM)",status:"High"},{time:"Evening (6PM-10PM)",status:"Very High"},{time:"Night (10PM-12AM)",status:"Moderate"}],tips:"Use the LG parking floors for better availability. E-payment options available."},{id:9,name:"Paradigm Mall PJ",address:"1, Jalan SS 7/26A, Kelana Jaya, 47301",lat:3.105083,lng:101.595944,capacity:4500,pricePerHour:3,isLegal:!0,type:"mall",walkTime:5,peakHours:"12PM-9PM",availabilityDescription:"Good availability most times",findingProbability:85,trafficFrequency:[10,8,5,5,8,20,35,45,60,70,80,85,80,75,70,75,85,90,80,65,50,30,20,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Main Entrance",description:"Via Jalan SS7/26A"},{name:"East Entrance",description:"Via Lebuhraya Damansara-Puchong"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Low"},{time:"Afternoon (12PM-6PM)",status:"Moderate"},{time:"Evening (6PM-10PM)",status:"High"},{time:"Night (10PM-12AM)",status:"Low"}],tips:"Higher floors usually have more available spaces. Free parking with minimum purchase."},{id:10,name:"Atria Shopping Gallery",address:"Jalan SS 22/23, Damansara Jaya, 47400",lat:3.12725,lng:101.616411,capacity:1700,pricePerHour:2,isLegal:!0,type:"mall",walkTime:3,peakHours:"12PM-8PM",availabilityDescription:"Usually has available spaces",findingProbability:80,trafficFrequency:[8,5,5,5,10,20,30,45,55,65,70,75,70,65,60,65,75,80,70,55,40,25,15,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Main Entrance",description:"Via Jalan SS22/23"},{name:"Side Entrance",description:"Via Jalan SS22/19"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Low"},{time:"Afternoon (12PM-6PM)",status:"Moderate"},{time:"Evening (6PM-10PM)",status:"High"},{time:"Night (10PM-12AM)",status:"Low"}],tips:"First hour free with validation. Weekend parking can get crowded during events."},{id:11,name:"Unauthorized - Jalan Raja Laut",address:"Jalan Raja Laut, 50350",lat:3.16046,lng:101.695206,capacity:12,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:4,peakHours:"8AM-6PM",availabilityDescription:"Often available but high risk of summons",findingProbability:80,trafficFrequency:[5,5,5,5,10,30,50,80,90,85,80,75,70,75,80,85,90,85,70,50,30,20,10,5],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Roadside",description:"Along Jalan Raja Laut – frequent patrols"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Moderate Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Very risky—avoid during peak enforcement hours."},{id:12,name:"Unauthorized - Jalan Ipoh",address:"Jalan Ipoh, 51208",lat:3.174444,lng:101.686111,capacity:8,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:8,peakHours:"7AM-5PM",availabilityDescription:"Spots usually free but heavily monitored",findingProbability:60,trafficFrequency:[10,10,10,10,15,25,40,60,75,80,85,80,75,70,65,70,75,80,70,50,30,20,15,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Side Alley",description:"Between Jalan Ipoh and Jalan Sultan Azlan Shah"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Low Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Enforcement tends to slack off after 6PM but still use at your own risk."},{id:13,name:"Unauthorized - Jalan Pudu (near Pudu Sentral)",address:"Jalan Pudu, Pudu Sentral, 55100",lat:3.14556,lng:101.70083,capacity:10,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:3,peakHours:"6AM-2PM",availabilityDescription:"Rarely full but constant risk of summons",findingProbability:70,trafficFrequency:[15,15,15,15,20,35,55,75,85,80,75,70,65,60,55,60,65,70,60,45,30,20,15,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Bus Terminal Side",description:"Between Pudu Sentral entrance and main road"}],busyTimes:[{time:"Morning (6AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"Moderate Risk"},{time:"Evening (6PM-10PM)",status:"Low Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Summons officers patrol continuously—consider other options."},{id:14,name:"Unauthorized - Jalan Sultan Ismail",address:"Jalan Sultan Ismail, 50250",lat:3.1552829,lng:101.7053617,capacity:9,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:2,peakHours:"9AM-7PM",availabilityDescription:"Often empty but heavy fines apply",findingProbability:65,trafficFrequency:[20,20,20,20,25,45,65,85,95,90,85,80,75,70,65,70,75,80,70,55,35,25,20,15],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Frontage",description:"Roadside near Grand Millennium Hotel"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Moderate Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Fines here can exceed RM150—park elsewhere if possible."},{id:15,name:"Unauthorized - Jalan Sultan Mohammed",address:"Jalan Sultan Mohammed, 50050",lat:3.1418658,lng:101.6954367,capacity:7,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:5,peakHours:"10AM-4PM",availabilityDescription:"Frequent openings but patrols are regular",findingProbability:60,trafficFrequency:[10,10,10,10,20,40,60,80,90,85,80,75,70,65,60,65,70,75,65,50,30,20,15,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Side Lane",description:"Opposite Central Market side street"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Moderate Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Best avoided—central enforcement is strict in this area."},{id:16,name:"Unauthorized - Jalan SS 2/1",address:"Jalan SS 2/1, SS2, 47300 Petaling Jaya",lat:3.1112,lng:101.611,capacity:10,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:5,peakHours:"8AM-6PM",availabilityDescription:"Often available but high risk of summons",findingProbability:80,trafficFrequency:[5,5,5,5,10,20,40,80,90,85,80,75,70,75,80,85,90,85,70,50,30,20,10,5],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Roadside",description:"Along SS2/1 – frequent patrols"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Moderate Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Very risky—avoid during peak enforcement hours."},{id:17,name:"Unauthorized - Jalan 14/1",address:"Jalan 14/1, Seksyen 14, 46100 Petaling Jaya",lat:3.1050201,lng:101.6369018,capacity:8,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:7,peakHours:"7AM-5PM",availabilityDescription:"Spots usually free but heavily monitored",findingProbability:60,trafficFrequency:[10,10,10,10,15,25,40,60,75,80,85,80,75,70,65,70,75,80,70,50,30,20,15,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Side Lane",description:"Between Jalan 14/1 and Jalan 14/3"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Low Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Enforcement tends to slack off after hours but still at your own risk."},{id:18,name:"Unauthorized - Jalan Gasing",address:"Jalan Gasing, 46000 Petaling Jaya",lat:3.0983,lng:101.652339,capacity:12,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:6,peakHours:"9AM-7PM",availabilityDescription:"Often empty but fines apply",findingProbability:65,trafficFrequency:[20,20,20,20,25,45,65,85,95,90,85,80,75,70,65,70,75,80,70,55,35,25,20,15],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Roadside",description:"Opposite commercial shops – heavy patrols"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Moderate Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Best avoided during office hours."},{id:19,name:"Unauthorized - Jalan Templer",address:"Jalan Templer, 46000 Petaling Jaya",lat:3.0878383,lng:101.6528161,capacity:7,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:8,peakHours:"6AM-4PM",availabilityDescription:"Frequent openings but patrols are regular",findingProbability:60,trafficFrequency:[10,10,10,10,20,40,60,80,90,85,80,75,70,65,60,65,70,75,65,50,30,20,15,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Frontage",description:"Roadside near banks – vigilant enforcement"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"High Risk"},{time:"Evening (6PM-10PM)",status:"Moderate Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Summons often exceed RM100 here."},{id:20,name:"Unauthorized - Jalan SS 21/1–62",address:"Jalan SS 21/1–62, 47400 Petaling Jaya",lat:3.1367399,lng:101.6207152,capacity:9,pricePerHour:0,isLegal:!1,type:"illegal",walkTime:4,peakHours:"8AM-6PM",availabilityDescription:"Rarely full but constant risk of summons",findingProbability:70,trafficFrequency:[15,15,15,15,20,35,55,75,85,80,75,70,65,60,55,60,65,70,60,45,30,20,15,10],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Roadside",description:"Along SS21 – regular patrols"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"High Risk"},{time:"Afternoon (12PM-6PM)",status:"Moderate Risk"},{time:"Evening (6PM-10PM)",status:"Low Risk"},{time:"Night (10PM-12AM)",status:"Low Risk"}],tips:"⚠️ Officers patrol continuously—consider legal alternatives."},{id:21,name:"Outdoor Parking - Kampung Pandan",address:"Kampung Pandan, 55100 Kuala Lumpur",lat:3.125306,lng:101.673972,capacity:30,pricePerHour:2,isLegal:!0,type:"outdoor",walkTime:5,peakHours:"7AM-8PM",availabilityDescription:"Open parking area with moderate availability",findingProbability:65,trafficFrequency:[15,15,15,20,35,55,70,85,80,75,70,65,60,65,70,75,80,75,65,50,40,30,20,15],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Main Entrance",description:"Via main road"}],busyTimes:[{time:"Morning (8AM-12PM)",status:"Moderate"},{time:"Afternoon (12PM-6PM)",status:"High"},{time:"Evening (6PM-10PM)",status:"Moderate"},{time:"Night (10PM-12AM)",status:"Low"}],tips:"Good alternative to mall parking. Images available in place1 folder."},{id:22,name:"Kampung Pandan Roadside Parking",address:"Jalan Kampung Pandan Dalam, Kampung Pandan Dalam, 55100 Kuala Lumpur",lat:3.1235934,lng:101.6729305,capacity:20,pricePerHour:2,isLegal:!0,type:"street",walkTime:3,peakHours:"7:30 AM - 9:30 AM, 5:00 PM - 7:00 PM",availabilityDescription:"Moderate availability on weekdays, high on weekends",findingProbability:80,trafficFrequency:[20,15,10,10,15,20,30,60,80,90,85,75,70,65,60,55,50,45,40,35,30,25,22,20],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Main Roadside Zone",description:"Legal street parking along Kampung Pandan Dalam road with clear road markings"},{name:"Secondary Zone",description:"Additional spaces available behind the shops"}],busyTimes:[{time:"Morning (8AM-10AM)",status:"High occupancy"},{time:"Afternoon (12PM-2PM)",status:"Moderate occupancy"},{time:"Evening (6PM-8PM)",status:"High occupancy"},{time:"Late night (10PM-12AM)",status:"Low occupancy"}],tips:"Payment is required using the parking machines along the roadside. Display ticket clearly on dashboard."},{id:23,name:"12, Lorong Abdullah Parking",address:"12, Lorong Abdullah, Bangsar, 59000 Kuala Lumpur",lat:3.1289567,lng:101.6766321,capacity:40,pricePerHour:0,isLegal:!0,type:"structure",walkTime:2,peakHours:"8:00 AM - 11:00 AM, 6:00 PM - 9:00 PM",availabilityDescription:"Good availability during off-peak hours, limited during morning and evening peak times",findingProbability:85,trafficFrequency:[25,20,15,10,15,20,30,40,50,55,60,65,70,75,80,85,90,95,90,85,70,55,40,30],images:["/images/spots/spot_1.jpg","/images/spots/spot_2.jpg"],availability:[{day:"Monday-Friday",times:["8:00 AM - 10:00 PM"]},{day:"Saturday-Sunday",times:["10:00 AM - 8:00 PM"]}],restrictions:["No overnight parking","No parking during events"],description:"Convenient parking spot located in the heart of the area. Easy access to nearby amenities.",entrances:[{name:"Main Entrance",description:"Enter from Lorong Abdullah street entrance"},{name:"Back Entry",description:"Alternative entry from the rear of the building accessible from Jalan Ara"}],busyTimes:[{time:"Morning (8AM-11AM)",status:"Low occupancy"},{time:"Afternoon (12PM-2PM)",status:"Moderate occupancy"},{time:"Evening (6PM-9PM)",status:"High occupancy"},{time:"Late night (10PM-12AM)",status:"Moderate occupancy"}],tips:"Fixed rate of RM12 per entry per day. Pay at the automated machine before leaving."}];var e4=t(8076),e3=t(1890);function e7(){let[e,a]=(0,s.useState)(null),[t,j]=(0,s.useState)(""),[M,N]=(0,s.useState)("all"),[k,w]=(0,s.useState)(!1),[P,T]=(0,s.useState)(!1),[R,_]=(0,s.useState)(new Date),[D,F]=(0,s.useState)(!1),[I,B]=(0,s.useState)("map"),[O,q]=(0,s.useState)(!1),V=(0,s.useRef)(null),[W,Z]=(0,s.useState)([]),[X,ea]=(0,s.useState)(!1),[er,el]=(0,s.useState)(!1),[eo,ed]=(0,s.useState)(!1),[ec,eu]=(0,s.useState)(!1),[eg,ep]=(0,s.useState)(!1),[eh,ex]=(0,s.useState)(null),[ey,ev]=(0,s.useState)(null),[eb,ej]=(0,s.useState)(2),{isSubscribed:eM}=(0,e4.R)(),{toast:ek}=e0(),ew=function(){let[e,a]=(0,s.useState)({latitude:null,longitude:null,error:null,loading:!0});return(0,s.useEffect)(()=>{if(!navigator.geolocation){a({...e,error:"Geolocation is not supported by your browser",loading:!1});return}let t=navigator.geolocation.watchPosition(e=>{a({latitude:e.coords.latitude,longitude:e.coords.longitude,error:null,loading:!1})},t=>{a({...e,error:t.message,loading:!1})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0});return()=>{navigator.geolocation.clearWatch(t)}},[]),e}();(0,s.useEffect)(()=>{let e=setTimeout(()=>T(!0),1e3);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{let e=setInterval(()=>{_(new Date)},6e4);return()=>clearInterval(e)},[]);let eP=(0,s.useMemo)(()=>e6.map(e=>{let a=function(e,a,t,i){if(null===e||null===a)return 99999;let s=ef(t-e),n=ef(i-a),r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ef(e))*Math.cos(ef(t))*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371}(ew.latitude,ew.longitude,e.lat,e.lng),t=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"driving";return Math.round(e/({driving:30,walking:5,transit:20})[a]*60)}(a,"driving");return{...e,distanceKm:a,estimatedDriveTimeMin:t}}).sort((e,a)=>(e.distanceKm||99999)-(a.distanceKm||99999)),[ew.latitude,ew.longitude]),eA=(0,s.useMemo)(()=>eP.filter(e=>{if(t){let a=t.toLowerCase();if(!(e.name.toLowerCase().includes(a)||e.address.toLowerCase().includes(a)))return!1}return"all"===M||("legal"!==M||!!e.isLegal)&&("illegal"!==M||!e.isLegal)}),[eP,t,M]),eS=e=>e>=70?"text-green-600":e>=50?"text-yellow-600":e>=30?"text-orange-600":"text-red-600",eC=e=>{switch(e){case"Low":return"text-green-600";case"Moderate":return"text-yellow-600";case"High":return"text-orange-600";case"Very High":case"High Risk":case"Moderate Risk":case"Low Risk":return"text-red-600";default:return"text-gray-600"}},eL=e=>{let a=R.getHours(),t=e.trafficFrequency[a];return Math.max(5,Math.min(95,Math.round((100-t)/100*e.findingProbability)))};return(0,i.jsxs)("div",{className:"flex flex-col h-screen bg-background w-full max-w-md mx-auto overflow-hidden",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 p-2 border-b bg-white sticky top-0 z-20",children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,i.jsx)(S,{placeholder:"Find parking near...",value:t,onChange:e=>j(e.target.value),className:"pl-10 text-sm"})]}),(0,i.jsxs)(E,{children:[(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)(A,{size:"icon",variant:"outline",className:"h-10 w-12 px-2",children:[(0,i.jsx)(r.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Filter"})]})}),(0,i.jsxs)(z,{side:"bottom",className:"h-[380px] sm:h-[480px] sm:max-w-lg sm:rounded-lg sm:border",children:[(0,i.jsx)(J,{children:(0,i.jsx)(U,{children:"Filter Parking Spots"})}),(0,i.jsxs)("div",{className:"py-4",children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h3",{className:"mb-2 text-sm font-medium",children:"Legal Status"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(A,{variant:"all"===M?"default":"outline",className:"flex-1 h-9",onClick:()=>N("all"),children:"All"}),(0,i.jsxs)(A,{variant:"legal"===M?"default":"outline",className:"flex-1 h-9",onClick:()=>N("legal"),children:[(0,i.jsx)(l.A,{className:"w-4 h-4 mr-2"}),"Legal"]}),(0,i.jsxs)(A,{variant:"illegal"===M?"default":"outline",className:"flex-1 h-9",onClick:()=>N("illegal"),children:[(0,i.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Illegal"]})]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h3",{className:"mb-2 text-sm font-medium",children:"Sort By"}),(0,i.jsxs)(G,{defaultValue:"distance",children:[(0,i.jsx)(Q,{className:"w-full",children:(0,i.jsx)(Y,{placeholder:"Sort By"})}),(0,i.jsxs)($,{children:[(0,i.jsx)(ee,{value:"distance",children:"Distance"}),(0,i.jsx)(ee,{value:"price",children:"Price (Low to High)"}),(0,i.jsx)(ee,{value:"success",children:"Success Rate"})]})]})]}),(0,i.jsx)("div",{className:"pt-4",children:(0,i.jsx)(A,{className:"w-full",variant:"outline",onClick:()=>{N("all")},children:"Reset All Filters"})})]})]})]})]}),(0,i.jsxs)("div",{className:"sticky top-[56px] z-10 bg-white border-b border-gray-200 p-2 flex items-center justify-between shadow-sm",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(A,{size:"sm",variant:O?"default":"outline",className:"text-xs flex items-center h-8",onClick:()=>q(!O),children:[(0,i.jsx)(d.A,{className:"h-3.5 w-3.5 mr-1"}),"Traffic Heatmap"]}),(0,i.jsx)(A,{size:"sm",variant:"outline",className:"text-xs h-8",onClick:()=>B("map"===I?"list":"map"),children:"map"===I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.A,{className:"h-3.5 w-3.5 mr-1"}),"View List"]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.A,{className:"h-3.5 w-3.5 mr-1"}),"View Map"]})})]}),(0,i.jsx)(A,{className:"rounded-full w-8 h-8 p-0",variant:"outline",size:"icon",children:(0,i.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,i.jsx)("div",{className:"relative bg-gray-100 transition-all duration-300 ".concat("map"===I?"h-[60vh]":"h-[20vh]"),children:(0,i.jsx)(em,{apiKey:e3.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY||"",parkingSpots:eA,selectedSpotId:null==e?void 0:e.id,onSpotSelect:e=>a(e),userLocation:ew,showHeatmap:O,onMapLoad:e=>{V.current=e}})}),(0,i.jsxs)("div",{className:"bg-white border-t overflow-y-auto transition-all duration-300 ".concat("list"===I?"flex-1 max-h-[80vh]":"max-h-80"),children:[(0,i.jsx)("div",{className:"flex justify-between items-center p-2 sticky top-0 z-10 bg-white border-b",children:(0,i.jsx)("h3",{className:"font-medium text-sm flex items-center h-8",children:"Parking Knowledge Base"})}),e?(0,i.jsxs)("div",{className:"p-4 mb-20",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-semibold text-base",children:e.name}),(0,i.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.address}),(0,i.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[e.isLegal?(0,i.jsxs)(K,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:[(0,i.jsx)(l.A,{className:"w-3 h-3 mr-1"}),"Legal"]}):(0,i.jsxs)(K,{variant:"destructive",className:"text-xs",children:[(0,i.jsx)(o.A,{className:"w-3 h-3 mr-1"}),"Unauthorized"]}),(0,i.jsx)(K,{variant:"outline",className:"text-xs",children:e.type})]})]}),(0,i.jsx)(A,{onClick:()=>a(null),variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:"\xd7"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-lg font-bold ".concat(eS(eL(e))),children:[eL(e),"%"]}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Success Rate"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-xl font-bold",children:["RM",e.pricePerHour]}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Per Hour"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-xl font-bold",children:[e.walkTime,"min"]}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:"Walk"})]})]}),(0,i.jsxs)("div",{className:"mb-4 bg-gray-50 rounded-lg p-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsxs)("h4",{className:"font-medium text-sm flex items-center",children:[(0,i.jsx)(u.A,{className:"w-4 h-4 mr-1"}),"Traffic Frequency"]}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:R.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"flex items-end gap-px h-16 mb-1",children:e.trafficFrequency.map((e,a)=>(0,i.jsx)("div",{className:"bg-blue-400 rounded-t flex-1 min-w-0 transition-all",style:{height:"".concat(e/100*100,"%")},title:"".concat(a,":00 - ").concat(e,"% busy")},a))}),(0,i.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-[5]",style:{left:"".concat((R.getHours()+R.getMinutes()/60)/24*100,"%")},children:(0,i.jsx)("div",{className:"absolute -top-1 -left-1 w-2 h-2 bg-red-500 rounded-full"})}),(0,i.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[(0,i.jsx)("span",{children:"12AM"}),(0,i.jsx)("span",{children:"6AM"}),(0,i.jsx)("span",{children:"12PM"}),(0,i.jsx)("span",{children:"6PM"}),(0,i.jsx)("span",{children:"12AM"})]})]}),(0,i.jsxs)("div",{className:"text-xs text-gray-600 mt-2",children:["Current traffic: ",e.trafficFrequency[R.getHours()],"% busy"]})]}),(0,i.jsx)("div",{className:"mb-4 bg-gray-50 rounded-lg p-3",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(u.A,{className:"w-4 h-4 text-gray-600"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.availabilityDescription})]})}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("h4",{className:"font-medium text-sm mb-2 flex items-center",children:[(0,i.jsx)(g.A,{className:"w-4 h-4 mr-1"}),"Entrances & Access"]}),(0,i.jsx)("div",{className:"space-y-2",children:e.entrances.map((e,a)=>(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2",children:[(0,i.jsx)("div",{className:"font-medium text-xs",children:e.name}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]},a))})]}),(0,i.jsxs)("div",{className:"mb-4 bg-blue-50 rounded-lg p-3",children:[(0,i.jsx)("h4",{className:"font-medium text-sm mb-1 text-blue-800",children:"\uD83D\uDCA1 Local Tips"}),(0,i.jsx)("p",{className:"text-xs text-blue-700",children:e.tips})]}),k&&(0,i.jsxs)(et,{defaultValue:"busy-times",className:"mb-4",children:[(0,i.jsxs)(ei,{className:"grid w-full grid-cols-2 h-8",children:[(0,i.jsx)(es,{value:"busy-times",className:"text-xs",children:"Busy Times"}),(0,i.jsx)(es,{value:"info",className:"text-xs",children:"Details"})]}),(0,i.jsx)(en,{value:"busy-times",className:"mt-3",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"text-xs font-medium flex items-center",children:[(0,i.jsx)(p.A,{className:"w-3 h-3 mr-1"}),"Typical Busy Periods"]}),e.busyTimes.map((e,a)=>(0,i.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,i.jsx)("span",{children:e.time}),(0,i.jsx)("span",{className:"font-medium ".concat(eC(e.status)),children:e.status})]},a))]})}),(0,i.jsx)(en,{value:"info",className:"mt-3",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"text-xs font-medium",children:["Peak Hours: ",e.peakHours]}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:e.isLegal?"Standard rate: RM".concat(e.pricePerHour,"/hour"):"Risk of fines: RM50-150"}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Capacity: ",e.capacity," vehicles"]})]})})]}),(0,i.jsxs)(A,{variant:O?"default":"outline",size:"sm",onClick:()=>{if(q(!O),V.current)try{setTimeout(()=>{V.current&&google.maps.event.trigger(V.current,"resize")},10)}catch(e){console.error("Error refreshing map:",e)}},className:O?"bg-primary text-primary-foreground":"bg-white dark:bg-gray-800",title:O?"Hide Heatmap":"Show Heatmap",children:[(0,i.jsx)(u.A,{className:"h-4 w-4 mr-1"}),(0,i.jsxs)("span",{className:"text-xs",children:[O?"Hide":"Show"," Heatmap"]})]}),(0,i.jsx)("div",{className:"flex space-x-2 mt-2",children:(0,i.jsxs)(A,{onClick:()=>F(!0),className:"flex-1 h-9 text-sm",children:[(0,i.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Directions"]})}),(0,i.jsx)(eN,{open:D,onOpenChange:F,spot:e,userLocation:ew})]}):(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)("div",{className:"space-y-2 mb-20",children:eA.map(e=>(0,i.jsx)(C,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>a(e),children:(0,i.jsx)(L,{className:"p-3",children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("div",{className:"font-medium text-sm truncate",children:e.name}),(0,i.jsx)("div",{className:"text-xs text-gray-600 truncate mb-1",children:e.address}),(0,i.jsxs)("div",{className:"flex flex-1 justify-between items-center mb-1",children:[e.isLegal?(0,i.jsx)(K,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:"Legal"}):(0,i.jsx)(K,{variant:"destructive",className:"text-xs",children:"Risk"}),(0,i.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.walkTime,"min walk"]})]}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:e.availabilityDescription})]}),(0,i.jsxs)("div",{className:"text-right ml-2",children:[(0,i.jsxs)("div",{className:"font-semibold text-sm ".concat(eS(eL(e))),children:[eL(e),"%"]}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:["RM",e.pricePerHour,"/hr"]})]})]})})},e.id))})})]}),(0,i.jsx)("div",{className:"fixed bottom-16 right-4 z-30 md:absolute md:bottom-20 md:right-4",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(A,{size:"icon",className:"h-12 w-12 rounded-full shadow-lg bg-primary text-primary-foreground transition-all duration-200 ".concat(eg?"rotate-45":""),onClick:()=>ep(!eg),"aria-label":"Toggle feature menu",children:eg?(0,i.jsx)(x.A,{className:"h-6 w-6"}):(0,i.jsx)(h.A,{className:"h-6 w-6"})}),eg&&(0,i.jsxs)("div",{className:"absolute bottom-16 right-0 flex flex-col-reverse space-y-2 space-y-reverse",children:[(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("div",{className:"mr-2 bg-white dark:bg-gray-800 shadow-md px-2 py-1 rounded-lg text-sm hidden md:block",children:"Coupons"}),(0,i.jsxs)(A,{size:"icon",className:"h-10 w-10 rounded-full shadow-md bg-white dark:bg-gray-800 relative",onClick:()=>{el(!0),ep(!1)},children:[(0,i.jsx)(f.A,{className:"h-5 w-5 text-primary"}),W.length>0&&(0,i.jsx)("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs",children:W.length})]})]}),(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("div",{className:"mr-2 bg-white dark:bg-gray-800 shadow-md px-2 py-1 rounded-lg text-sm hidden md:block",children:"Messages"}),(0,i.jsxs)(A,{size:"icon",className:"h-10 w-10 rounded-full shadow-md bg-white dark:bg-gray-800 relative",onClick:()=>{eh&&eh(),ep(!1)},disabled:!eh,children:[(0,i.jsx)(y.A,{className:"h-5 w-5 text-primary"}),eb>0&&(0,i.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs",children:eb})]})]}),(0,i.jsxs)("div",{className:"flex items-center mb-2",children:[(0,i.jsx)("div",{className:"mr-2 bg-white dark:bg-gray-800 shadow-md px-2 py-1 rounded-lg text-sm hidden md:block",children:"Scan QR"}),(0,i.jsx)(A,{size:"icon",className:"h-10 w-10 rounded-full shadow-md bg-white dark:bg-gray-800",onClick:()=>{ey&&ey(),ep(!1)},disabled:!ey,"aria-label":"Scan QR code",children:(0,i.jsx)(v.A,{className:"h-5 w-5 text-primary"})})]})]})]})}),(0,i.jsx)(E,{open:er,onOpenChange:el,children:(0,i.jsxs)(z,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[(0,i.jsx)(J,{children:(0,i.jsxs)(U,{className:"flex items-center",children:[(0,i.jsx)(f.A,{className:"mr-2 h-5 w-5"}),"Parking Coupons"]})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(e1,{userCoupons:W,onAddCoupon:e=>{let a={...e,id:"coupon-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()))};console.log("Adding new coupon:",a),Z(e=>{let t=[...e,a];return console.log("Updated coupons:",t),t}),ek({title:"Coupon Added",description:"".concat(e.label," at ").concat(e.location," will expire at ").concat(e.expiryTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}))}),el(!1)},onDeleteCoupon:e=>{Z(a=>a.filter(a=>a.id!==e))}})})]})}),(0,i.jsx)(E,{open:X,onOpenChange:ea,children:(0,i.jsxs)(z,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[(0,i.jsx)(J,{children:(0,i.jsxs)(U,{className:"flex items-center",children:[(0,i.jsx)(b.A,{className:"mr-2 h-5 w-5"}),"Live Parking Updates"]})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(e8,{userLocation:ew.latitude&&ew.longitude?{lat:ew.latitude,lng:ew.longitude}:null,parkingSpots:e6,radius:2,isSubscribed:eM})})]})}),(0,i.jsx)(eD,{onOpenMessages:e=>{ex(()=>e)},onOpenScanner:e=>{ev(()=>e)},onUnreadCountChange:e=>{ej(e)}})]})}},8076:(e,a,t)=>{"use strict";t.d(a,{R:()=>r,SubscriptionProvider:()=>l});var i=t(5155),s=t(2115);let n=(0,s.createContext)({subscriptionStatus:"free",isSubscribed:!1,subscriptionExpiry:null,upgradeSubscription:()=>{},cancelSubscription:()=>{}}),r=()=>(0,s.useContext)(n),l=e=>{let{children:a}=e,[t,r]=(0,s.useState)("free"),[l,o]=(0,s.useState)(null),d="premium"===t&&!!l&&new Date<l;return(0,s.useEffect)(()=>{let e=localStorage.getItem("parklah_subscription");if(e)try{let{status:a,expiry:t}=JSON.parse(e);if("premium"===a){let e=new Date(t);e>new Date?(r("premium"),o(e)):localStorage.removeItem("parklah_subscription")}}catch(e){console.error("Error parsing subscription data:",e)}},[]),(0,i.jsx)(n.Provider,{value:{subscriptionStatus:t,isSubscribed:d,subscriptionExpiry:l,upgradeSubscription:()=>{r("premium");let e=new Date;e.setDate(e.getDate()+30),o(e),localStorage.setItem("parklah_subscription",JSON.stringify({status:"premium",expiry:e.toISOString()}))},cancelSubscription:()=>{r("free"),o(null),localStorage.removeItem("parklah_subscription")}},children:a})}},9106:(e,a,t)=>{"use strict";function i(){return"/parklah"}function s(e){return e.startsWith("/")?"".concat(i()).concat(e):e}t.d(a,{D:()=>i,h:()=>s})},9314:(e,a,t)=>{Promise.resolve().then(t.bind(t,5276))}},e=>{var a=a=>e(e.s=a);e.O(0,[84,49,441,684,358],()=>a(9314)),_N_E=e.O()}]);